<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="UTF-8">
  <title>WRSR — Калькулятор грузовиков</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"
    defer></script>

</head>

<body data-bs-theme="dark">
  <div class="container py-5">
    <div class="card shadow rounded-4">
      <div class="card-body">
        <a href="index.html" class="text-decoration-none">
          Назад
        </a>
        <h3 class="card-title my-3">Калькулятор грузовиков</h3>
        <form id="calcForm">
          <div class="row g-3">
            <div class="col-md-6">
              <label class="form-label">Потребление завода (т/сутки)</label>
              <input type="number" class="form-control" id="consumption" value="30" step="0.1">
            </div>
            <div class="col-md-6">
              <label class="form-label">Вместимость грузовика (т)</label>
              <input type="number" class="form-control" id="capacity" value="7" step="0.1">
            </div>
            <div class="col-md-6">
              <label class="form-label">Расстояние в одну сторону (м)</label>
              <input type="number" class="form-control" id="distance" value="765" step="1">
            </div>
            <div class="col-md-6">
              <label class="form-label">Скорость грузовика (км/ч)</label>
              <input type="number" class="form-control" id="speed" value="80" step="1">
            </div>
            <div class="col-md-6">
              <label class="form-label">Время загрузки (сутки)</label>
              <input type="number" class="form-control" id="tLoad" value="0.07" step="0.01">
            </div>
            <div class="col-md-6">
              <label class="form-label">Время выгрузки (сутки)</label>
              <input type="number" class="form-control" id="tUnload" value="0.07" step="0.01">
            </div>
          </div>

          <div class="form-check mt-4">
            <input class="form-check-input" type="checkbox" id="errorMargin">
            <label class="form-check-label" for="errorMargin">
              Отнять погрешность (−10% к скорости)
            </label>
          </div>
          <div class="form-check mb-4">
            <input class="form-check-input" type="checkbox" id="reserve">
            <label class="form-check-label" for="reserve">
              С запасом (+15% машин)
            </label>
          </div>

          <button type="button" class="btn btn-primary w-100" onclick="calculate()">Рассчитать</button>
        </form>

        <div id="result" class="alert alert-info mt-4 d-none"></div>

        <small class="text-secondary mt-3 d-block">
          Расчёт скорости игрового авто основан на этой <a
            href="https://wiki.hoodedhorse.com/Workers_Resources_Soviet_Republic/Vehicles">статье</a>.
        </small>
      </div>
    </div>
  </div>

  <script>
    function calculate() {
      const C = parseFloat(document.getElementById('consumption').value);
      const Q = parseFloat(document.getElementById('capacity').value);
      const d = parseFloat(document.getElementById('distance').value);
      const V = parseFloat(document.getElementById('speed').value);
      const tLoad = parseFloat(document.getElementById('tLoad').value);
      const tUnload = parseFloat(document.getElementById('tUnload').value);

      let S_day = 15.625 * V; // путь за сутки
      if (document.getElementById('errorMargin').checked) {
        S_day *= 0.9; // -10%
      }

      const tCycle = (2 * d / S_day) + tLoad + tUnload;
      const throughput = Q / tCycle; // т/сутки на грузовик
      let N = Math.ceil(C / throughput);

      if (document.getElementById('reserve').checked) {
        N = Math.ceil(N * 1.15);
      }

      const result = document.getElementById('result');
      result.classList.remove('d-none');
      result.innerHTML = `
        <b>Необходимое число грузовиков:</b> ${N}<br>
        <small>(Пропускная способность одного: ${throughput.toFixed(2)} т/сутки)</small>
      `;
    }
  </script>
</body>

</html>